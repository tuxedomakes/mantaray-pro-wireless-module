/*
 * Copyright (c) 2024 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

/ {
    // This node is the matrix transform. It defines the keyboard's dimensions.
    matrix_transform: matrix_transform_node {
        compatible = "zmk,matrix-transform";
        columns = <14>; // IMPORTANT: Update with your total column count
        rows = <5>;     // IMPORTANT: Update with your total row count

        /*
         * For complex layouts, you may need a `map` property here.
         * For a simple rectangular matrix, you can omit it.
         * Example for a 2x2 matrix:
         * map = <
         *   RC(0,0) RC(0,1)
         *   RC(1,0) RC(1,1)
         * >;
        */
    };

    // This node is the kscan driver. It defines the GPIOs used for the matrix.
    kscan0: kscan_0 {
        compatible = "zmk,kscan-gpio-matrix";
        diode-direction = "col2row"; // Or "row2col" depending on your PCB

        // IMPORTANT: Update with your actual GPIO pin assignments.
        // The format is <&pro_micro PIN_NUMBER 0>.
        col-gpios = <&pro_micro 21 0>, <&pro_micro 20 0>, <&pro_micro 19 0>, <&pro_micro 18 0>, <&pro_micro 15 0>, <&pro_micro 14 0>, <&pro_micro 16 0>;
        row-gpios = <&pro_micro 10 0>, <&pro_micro 9 0>, <&pro_micro 8 0>, <&pro_micro 7 0>, <&pro_micro 6 0>;
    };

    // This is the physical layout definition that was missing.
    // It gives a name to each key position.
    layouts {
        compatible = "zmk,layouts";
        default_layout {
            // This needs to have (rows * columns) entries. The names are
            // arbitrary but should be descriptive. This is a placeholder.
            layout = <
                L_00 L_01 L_02 L_03 L_04 L_05 L_06 R_00 R_01 R_02 R_03 R_04 R_05 R_06
                L_10 L_11 L_12 L_13 L_14 L_15 L_16 R_10 R_11 R_12 R_13 R_14 R_15 R_16
                L_20 L_21 L_22 L_23 L_24 L_25 L_26 R_20 R_21 R_22 R_23 R_24 R_25 R_26
                L_30 L_31 L_32 L_33 L_34 L_35 L_36 R_30 R_31 R_32 R_33 R_34 R_35 R_36
                L_40 L_41 L_42 L_43 L_44 L_45 L_46 R_40 R_41 R_42 R_43 R_44 R_45 R_46
            >;
        };
    };
};